function ContextMenu(t,n){this.contextMenuContainer=$('.context-menu[data-container-id="'+t+'"]'),this.contextMenuContainer.click(function(t){var e=$(this),i="#"+$(this).attr("data-container-id"),o=$(i),c={left:t.clientX-o.width()-15,top:o.offset().top+t.clientY};if(isElementInViewport(o))o.css({top:c.top,left:c.left,position:"absolute"});else{alert("View not visible");var l=o.width()+o.offset().left,u=$(window).width(),s=c.left-(u-l),d=c.left-s-10;o.css({top:c.top,left:d,position:"absolute"})}o.find("ul > li").click(function(){n($(this),e),o.hide(),o.find("ul > li").unbind("click")}),o.show()}),this.destroy=function(){this.contextMenuContainer.unbind("click")}}function isElementInViewport(t){"function"==typeof jQuery&&t instanceof jQuery&&(t=t[0]);var n=t.getBoundingClientRect();return n.top>=0&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth)}$(document).mouseup(function(t){var n=$(".context-menu-container");n.is(t.target)||0!==n.has(t.target).length||n.hide()});