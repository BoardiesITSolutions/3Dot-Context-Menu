function ContextMenu(t,n){this.contextMenuContainer=$('.context-menu[data-container-id="'+t+'"]'),this.contextMenuContainer.click(function(t){var e=this,i=$(this),o="#"+$(this).attr("data-container-id");this.contextMenu=$(o);var c={left:t.clientX-this.contextMenu.width()-15,top:t.clientY};if(isElementInViewport(this.contextMenu))this.contextMenu.css({top:c.top,left:c.left,position:"absolute"});else{alert("View not visible");var u=this.contextMenu.width()+this.contextMenu.offset().left,s=$(window).width(),l=c.left-(s-u),h=c.left-l-10;alert("Right Edge Pos: "+u+"\nScreen Width: "+s+"\nShow Pos: "+h),this.contextMenu.css({top:c.top,left:h,position:"absolute"})}this.contextMenu.find("ul > li").click(function(){n($(this),i),e.contextMenu.hide(),e.contextMenu.find("ul > li").unbind("click")}),this.contextMenu.show()}),this.destroy=function(){console.log("destroying context menu"),console.log(this.contextMenuContainer),this.contextMenuContainer.unbind("click")}}function isElementInViewport(t){"function"==typeof jQuery&&t instanceof jQuery&&(t=t[0]);var n=t.getBoundingClientRect();return n.top>=0&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth)}$(document).mouseup(function(t){var n=$(".context-menu-container");n.is(t.target)||0!==n.has(t.target).length||n.hide()});