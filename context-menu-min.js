function ContextMenu(t,e,n){this.contextContainerID=t,this.contextMenuContainer=$('.context-menu[data-container-id="'+t+'"]');var i=this,o=$(this);this.contextMenuContainer.click(function(t){var s="#"+$(this).attr("data-container-id"),l=$(s);i.contextMenu=l;var u={left:t.clientX-l.width()-15,top:l.offset().top+t.clientY};if(isElementInViewport(l))l.css({top:u.top,left:u.left,position:"absolute"});else{alert("View not visible");var a=l.width()+l.offset().left,d=$(window).width(),c=u.left-(d-a),r=u.left-c-10;l.css({top:u.top,left:r,position:"absolute"})}null!=n&&void 0!==n&&void 0!==n.openCallBack&&n.openCallBack(i),l.find("ul > li").click(function(){$(this).hasClass("disabled")||(e($(this),o),l.hide(),l.find("ul > li").unbind("click"))}),l.show()}),this.destroy=function(){this.contextMenuContainer.unbind("click")},this.returnContextMenu=function(){var t=null;if(void 0!==i.contextMenu)t=i.contextMenu;else{var e="#"+$('.context-menu[data-container-id="'+this.contextContainerID+'"]').attr("data-container-id");t=$(e)}return t},this.disableMenuItem=function(t){var e=0,n=this.returnContextMenu(),i=n.find("ul > li").length;n.find("ul > li").each(function(){if("number"==typeof t){if(t<0||t>i)throw"3Dot-ContextMenu: Item index is out of bounds";e===t&&$(this).addClass("disabled")}else"string"==typeof t&&$(this).text()===t&&$(this).addClass("disabled");e++})},this.enableMenuItem=function(t){var e=0,n=this.returnContextMenu(),i=n.find("ul > li").length;n.find("ul > li").each(function(){if("number"==typeof t){if(t<0||t>i)throw"3Dot-ContextMenu: Item index is out of bounds";e===t&&$(this).removeClass("disabled")}else"string"==typeof t&&$(this).text()===t&&$(this).removeClass("disabled");e++})}}function isElementInViewport(t){"function"==typeof jQuery&&t instanceof jQuery&&(t=t[0]);var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}$(document).mouseup(function(t){var e=$(".context-menu-container");e.is(t.target)||0!==e.has(t.target).length||e.hide()});